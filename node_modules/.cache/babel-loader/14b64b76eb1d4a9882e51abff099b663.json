{"ast":null,"code":"import _slicedToArray from\"/Users/eli/Library/Mobile Documents/com~apple~CloudDocs/Coding/2023 code/ejtos-react_budget_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/Users/eli/Library/Mobile Documents/com~apple~CloudDocs/Coding/2023 code/ejtos-react_budget_app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/eli/Library/Mobile Documents/com~apple~CloudDocs/Coding/2023 code/ejtos-react_budget_app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useReducer}from'react';// 5. The reducer - this is used to update the state, based on the action\nimport{jsx as _jsx}from\"react/jsx-runtime\";export var AppReducer=function AppReducer(state,action){var budget=0;switch(action.type){case'ADD_EXPENSE':var total_budget=0;total_budget=state.expenses.reduce(function(previousExp,currentExp){return previousExp+currentExp.cost;},0);total_budget=total_budget+action.payload.cost;action.type=\"DONE\";if(total_budget<=state.budget){total_budget=0;state.expenses.map(function(currentExp){if(currentExp.name===action.payload.name){currentExp.cost=action.payload.cost+currentExp.cost;}return currentExp;});return _objectSpread({},state);}else{alert(\"Cannot increase the allocation! Out of funds\");return _objectSpread({},state);}case'RED_EXPENSE':var red_expenses=state.expenses.map(function(currentExp){if(currentExp.name===action.payload.name&&currentExp.cost-action.payload.cost>=0){currentExp.cost=currentExp.cost-action.payload.cost;budget=state.budget+action.payload.cost;}return currentExp;});action.type=\"DONE\";return _objectSpread(_objectSpread({},state),{},{expenses:_toConsumableArray(red_expenses)});case'DELETE_EXPENSE':action.type=\"DONE\";state.expenses.map(function(currentExp){if(currentExp.name===action.payload){budget=state.budget+currentExp.cost;currentExp.cost=0;}return currentExp;});action.type=\"DONE\";return _objectSpread(_objectSpread({},state),{},{budget:budget});case'SET_BUDGET':return _objectSpread(_objectSpread({},state),{},{budget:action.payload});case'SET_CURRENCY':return _objectSpread(_objectSpread({},state),{},{currency:action.payload});default:return state;}};// 1. Sets the initial state when the app loads\nvar initialState={budget:2000,expenses:[{id:\"Marketing\",name:'Marketing',cost:50},{id:\"Finance\",name:'Finance',cost:300},{id:\"Sales\",name:'Sales',cost:70},{id:\"Human Resource\",name:'Human Resource',cost:40},{id:\"IT\",name:'IT',cost:500}],currency:'$'};// 2. Creates the context this is the thing our components import and use to get the state\nexport var AppContext=/*#__PURE__*/createContext();// 3. Provider component - wraps the components we want to give access to the state\n// Accepts the children, which are the nested(wrapped) components\nexport var AppProvider=function AppProvider(props){// 4. Sets up the app state. takes a reducer, and an initial state\nvar _useReducer=useReducer(AppReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var remaining=0;if(state.expenses){var totalExpenses=state.expenses.reduce(function(total,item){return total=total+item.cost;},0);remaining=state.budget-totalExpenses;}return/*#__PURE__*/_jsx(AppContext.Provider,{value:{expenses:state.expenses,budget:state.budget,remaining:remaining,dispatch:dispatch,currency:state.currency},children:props.children});};","map":{"version":3,"names":["React","createContext","useReducer","AppReducer","state","action","budget","type","total_budget","expenses","reduce","previousExp","currentExp","cost","payload","map","name","alert","red_expenses","currency","initialState","id","AppContext","AppProvider","props","dispatch","remaining","totalExpenses","total","item","children"],"sources":["/Users/eli/Library/Mobile Documents/com~apple~CloudDocs/Coding/2023 code/ejtos-react_budget_app/src/context/AppContext.js"],"sourcesContent":["import React, { createContext, useReducer } from 'react';\n\n// 5. The reducer - this is used to update the state, based on the action\nexport const AppReducer = (state, action) => {\n    let budget = 0;\n    switch (action.type) {\n        case 'ADD_EXPENSE':\n            let total_budget = 0;\n            total_budget = state.expenses.reduce(\n                (previousExp, currentExp) => {\n                    return previousExp + currentExp.cost\n                },0\n            );\n            total_budget = total_budget + action.payload.cost;\n            action.type = \"DONE\";\n            if(total_budget <= state.budget) {\n                total_budget = 0;\n                state.expenses.map((currentExp)=> {\n                    if(currentExp.name === action.payload.name) {\n                        currentExp.cost = action.payload.cost + currentExp.cost;\n                    }\n                    return currentExp\n                });\n                return {\n                    ...state,\n                };\n            } else {\n                alert(\"Cannot increase the allocation! Out of funds\");\n                return {\n                    ...state\n                }\n            }\n            case 'RED_EXPENSE':\n                const red_expenses = state.expenses.map((currentExp)=> {\n                    if (currentExp.name === action.payload.name && currentExp.cost - action.payload.cost >= 0) {\n                        currentExp.cost =  currentExp.cost - action.payload.cost;\n                        budget = state.budget + action.payload.cost\n                    }\n                    return currentExp\n                })\n                action.type = \"DONE\";\n                return {\n                    ...state,\n                    expenses: [...red_expenses],\n                };\n            case 'DELETE_EXPENSE':\n            action.type = \"DONE\";\n            state.expenses.map((currentExp)=> {\n                if (currentExp.name === action.payload) {\n                    budget = state.budget + currentExp.cost\n                    currentExp.cost =  0;\n                }\n                return currentExp\n            })\n            action.type = \"DONE\";\n            return {\n                ...state,\n                budget\n            };\n  case 'SET_BUDGET':\n            return {\n                ...state,\n                budget: action.payload\n            };\n\n\n        case 'SET_CURRENCY':\n            return {\n                ...state,\n                currency: action.payload\n            };\n        default:\n            return state;\n    }\n};\n\n// 1. Sets the initial state when the app loads\nconst initialState = {\n    budget: 2000,\n    expenses: [\n        { id: \"Marketing\", name: 'Marketing', cost: 50 },\n        { id: \"Finance\", name: 'Finance', cost: 300 },\n        { id: \"Sales\", name: 'Sales', cost: 70 },\n        { id: \"Human Resource\", name: 'Human Resource', cost: 40 },\n        { id: \"IT\", name: 'IT', cost: 500 },\n    ],\n    currency: '$' \n};\n\n// 2. Creates the context this is the thing our components import and use to get the state\nexport const AppContext = createContext();\n\n// 3. Provider component - wraps the components we want to give access to the state\n// Accepts the children, which are the nested(wrapped) components\nexport const AppProvider = (props) => {\n    // 4. Sets up the app state. takes a reducer, and an initial state\n    const [state, dispatch] = useReducer(AppReducer, initialState);\n    let remaining = 0;\n\n    if (state.expenses) {\n            const totalExpenses = state.expenses.reduce((total, item) => {\n            return (total = total + item.cost);\n        }, 0);\n        remaining = state.budget - totalExpenses;\n    }\n\n    return (\n        <AppContext.Provider\n            value={{\n                expenses: state.expenses,\n                budget: state.budget,\n                remaining: remaining,\n                dispatch,\n                currency: state.currency\n            }}\n        >\n            {props.children}\n        </AppContext.Provider>\n    );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}