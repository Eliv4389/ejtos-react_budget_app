{"ast":null,"code":"import _slicedToArray from\"/Users/eli/Library/Mobile Documents/com~apple~CloudDocs/Coding/2023 code/ejtos-react_budget_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from'react';import{AppContext}from'../context/AppContext';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Budget=function Budget(){var _useContext=useContext(AppContext),budget=_useContext.budget,expenses=_useContext.expenses,dispatch=_useContext.dispatch,currency=_useContext.currency;var _useState=useState(budget.toString()),_useState2=_slicedToArray(_useState,2),newBudget=_useState2[0],setNewBudget=_useState2[1];// convert to string\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];// Calculate total expenses\nvar totalExpenses=expenses.reduce(function(total,item){return total+item.cost;},0);// Function to handle budget change\nvar handleBudgetChange=function handleBudgetChange(event){var value=event.target.value;setNewBudget(value);var intValue=parseInt(value,10);if(isNaN(intValue)){setErrorMessage(\"Please enter a valid number.\");return;}if(intValue>20000){setErrorMessage(\"Budget cannot be more than \".concat(currency,\"20,000.\"));return;}if(intValue<totalExpenses){setErrorMessage(\"Budget cannot be less than current spending (\".concat(currency).concat(totalExpenses,\").\"));}else{setErrorMessage('');}};// Function to update global budget\nvar handleUpdateBudget=function handleUpdateBudget(){var intValue=parseInt(newBudget,10);if(!isNaN(intValue)&&intValue>=totalExpenses&&intValue<=20000){dispatch({type:'SET_BUDGET',payload:intValue});setErrorMessage('');}};// Effect to update displayed budget when the context changes\nuseEffect(function(){setNewBudget(budget.toString());// convert to string\n},[budget]);return/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-secondary\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Budget: \",currency,budget]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"\".concat(currency,\" Budget Value\"),min:totalExpenses,max:\"20000\",step:\"10\",value:newBudget,onChange:handleBudgetChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdateBudget,children:\"Update Budget\"}),errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mt-2\",children:errorMessage})]});};export default Budget;","map":{"version":3,"names":["React","useContext","useState","useEffect","AppContext","Budget","budget","expenses","dispatch","currency","toString","newBudget","setNewBudget","errorMessage","setErrorMessage","totalExpenses","reduce","total","item","cost","handleBudgetChange","event","value","target","intValue","parseInt","isNaN","handleUpdateBudget","type","payload"],"sources":["/Users/eli/Library/Mobile Documents/com~apple~CloudDocs/Coding/2023 code/ejtos-react_budget_app/src/components/Budget.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { AppContext } from '../context/AppContext';\n\nconst Budget = () => {\n  const { budget, expenses, dispatch, currency } = useContext(AppContext);\n  const [newBudget, setNewBudget] = useState(budget.toString()); // convert to string\n  const [errorMessage, setErrorMessage] = useState('');\n\n  // Calculate total expenses\n  const totalExpenses = expenses.reduce((total, item) => total + item.cost, 0);\n\n  // Function to handle budget change\n  const handleBudgetChange = (event) => {\n    const value = event.target.value;\n    \n    setNewBudget(value);\n\n    const intValue = parseInt(value, 10);\n    \n    if (isNaN(intValue)) {\n      setErrorMessage(`Please enter a valid number.`);\n      return;\n    }\n\n    if (intValue > 20000) {\n      setErrorMessage(`Budget cannot be more than ${currency}20,000.`);\n      return;\n    }\n\n    if (intValue < totalExpenses) {\n      setErrorMessage(`Budget cannot be less than current spending (${currency}${totalExpenses}).`);\n    } else {\n      setErrorMessage('');\n    }\n  };\n\n  // Function to update global budget\n  const handleUpdateBudget = () => {\n    const intValue = parseInt(newBudget, 10);\n\n    if (!isNaN(intValue) && intValue >= totalExpenses && intValue <= 20000) {\n      dispatch({ type: 'SET_BUDGET', payload: intValue });\n      setErrorMessage('');\n    }\n  };\n\n  // Effect to update displayed budget when the context changes\n  useEffect(() => {\n    setNewBudget(budget.toString()); // convert to string\n  }, [budget]);\n\n  return (\n    <div className='alert alert-secondary'>\n      <span>Budget: {currency}{budget}</span>\n      <input\n        type=\"number\"\n        placeholder={`${currency} Budget Value`}\n        min={totalExpenses}\n        max=\"20000\"\n        step=\"10\"\n        value={newBudget}\n        onChange={handleBudgetChange}\n      />\n      <button onClick={handleUpdateBudget}>Update Budget</button>\n      {errorMessage && <div className=\"alert alert-danger mt-2\">{errorMessage}</div>}\n    </div>\n  );\n};\n\nexport default Budget;\n"],"mappings":"qLAAA,MAAOA,MAAP,EAAgBC,UAAhB,CAA4BC,QAA5B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,OAASC,UAAT,KAA2B,uBAA3B,C,wFAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CACnB,gBAAiDJ,UAAU,CAACG,UAAD,CAA3D,CAAQE,MAAR,aAAQA,MAAR,CAAgBC,QAAhB,aAAgBA,QAAhB,CAA0BC,QAA1B,aAA0BA,QAA1B,CAAoCC,QAApC,aAAoCA,QAApC,CACA,cAAkCP,QAAQ,CAACI,MAAM,CAACI,QAAP,EAAD,CAA1C,wCAAOC,SAAP,eAAkBC,YAAlB,eAA+D;AAC/D,eAAwCV,QAAQ,CAAC,EAAD,CAAhD,yCAAOW,YAAP,eAAqBC,eAArB,eAEA;AACA,GAAMC,cAAa,CAAGR,QAAQ,CAACS,MAAT,CAAgB,SAACC,KAAD,CAAQC,IAAR,QAAiBD,MAAK,CAAGC,IAAI,CAACC,IAA9B,EAAhB,CAAoD,CAApD,CAAtB,CAEA;AACA,GAAMC,mBAAkB,CAAG,QAArBA,mBAAqB,CAACC,KAAD,CAAW,CACpC,GAAMC,MAAK,CAAGD,KAAK,CAACE,MAAN,CAAaD,KAA3B,CAEAV,YAAY,CAACU,KAAD,CAAZ,CAEA,GAAME,SAAQ,CAAGC,QAAQ,CAACH,KAAD,CAAQ,EAAR,CAAzB,CAEA,GAAII,KAAK,CAACF,QAAD,CAAT,CAAqB,CACnBV,eAAe,gCAAf,CACA,OACD,CAED,GAAIU,QAAQ,CAAG,KAAf,CAAsB,CACpBV,eAAe,sCAA+BL,QAA/B,YAAf,CACA,OACD,CAED,GAAIe,QAAQ,CAAGT,aAAf,CAA8B,CAC5BD,eAAe,wDAAiDL,QAAjD,SAA4DM,aAA5D,OAAf,CACD,CAFD,IAEO,CACLD,eAAe,CAAC,EAAD,CAAf,CACD,CACF,CAtBD,CAwBA;AACA,GAAMa,mBAAkB,CAAG,QAArBA,mBAAqB,EAAM,CAC/B,GAAMH,SAAQ,CAAGC,QAAQ,CAACd,SAAD,CAAY,EAAZ,CAAzB,CAEA,GAAI,CAACe,KAAK,CAACF,QAAD,CAAN,EAAoBA,QAAQ,EAAIT,aAAhC,EAAiDS,QAAQ,EAAI,KAAjE,CAAwE,CACtEhB,QAAQ,CAAC,CAAEoB,IAAI,CAAE,YAAR,CAAsBC,OAAO,CAAEL,QAA/B,CAAD,CAAR,CACAV,eAAe,CAAC,EAAD,CAAf,CACD,CACF,CAPD,CASA;AACAX,SAAS,CAAC,UAAM,CACdS,YAAY,CAACN,MAAM,CAACI,QAAP,EAAD,CAAZ,CAAiC;AAClC,CAFQ,CAEN,CAACJ,MAAD,CAFM,CAAT,CAIA,mBACE,aAAK,SAAS,CAAC,uBAAf,wBACE,mCAAeG,QAAf,CAAyBH,MAAzB,GADF,cAEE,cACE,IAAI,CAAC,QADP,CAEE,WAAW,WAAKG,QAAL,iBAFb,CAGE,GAAG,CAAEM,aAHP,CAIE,GAAG,CAAC,OAJN,CAKE,IAAI,CAAC,IALP,CAME,KAAK,CAAEJ,SANT,CAOE,QAAQ,CAAES,kBAPZ,EAFF,cAWE,eAAQ,OAAO,CAAEO,kBAAjB,2BAXF,CAYGd,YAAY,eAAI,YAAK,SAAS,CAAC,yBAAf,UAA0CA,YAA1C,EAZnB,GADF,CAgBD,CAhED,CAkEA,cAAeR,OAAf"},"metadata":{},"sourceType":"module"}